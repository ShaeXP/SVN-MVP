import 'package:flutter/material.dart';
import 'package:get/get.dart';
import '../../app/routes/app_routes.dart';
import 'nav_controller.dart';

// PRESENTATION SCREENS (adjust class names only if needed)
import '../../../presentation/home_screen/home_screen.dart';
import '../../../presentation/active_recording_screen/active_recording_screen.dart';
import '../../../presentation/recording_library_screen/recording_library_screen.dart';
import '../../../presentation/settings_screen/settings_screen.dart'; // <-- keep; fix class name below if needed

class NavView extends GetView<NavController> {
  const NavView({super.key});

   @override
  Widget build(BuildContext context) {
    return WillPopScope(
      onWillPop: controller.onWillPop,
      child: Obx(() {
        final idx = controller.currentIndex.value;

        return Scaffold(
          body: IndexedStack(
            index: idx,
            children: [
              HomeScreen(),              // Home tab â†’ your real Home
              ActiveRecordingScreen(),   // Record tab
              RecordingLibraryScreen(),  // Library tab
              SettingsScreen(),          // Settings tab (rename if your class differs)
            ],
          ),
          bottomNavigationBar: NavigationBar(
            selectedIndex: idx,
            onDestinationSelected: controller.switchTab,
            destinations: const [
              NavigationDestination(icon: Icon(Icons.home_outlined), selectedIcon: Icon(Icons.home), label: 'Home'),
              NavigationDestination(icon: Icon(Icons.mic_none), selectedIcon: Icon(Icons.mic), label: 'Record'),
              NavigationDestination(icon: Icon(Icons.library_books_outlined), selectedIcon: Icon(Icons.library_books), label: 'Library'),
              NavigationDestination(icon: Icon(Icons.settings_outlined), selectedIcon: Icon(Icons.settings), label: 'Settings'),
            ],
          ),
        );
      }),
    );
  }
}

